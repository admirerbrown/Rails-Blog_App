require 'rails_helper'

RSpec.describe Comment, type: :model do
  it '#update_comment_counter should increase post_comments_counter by 1' do
    user1 = User.new(name: 'John', photo: 'http//:www.myphoto.com', bio: 'software developer from Germany')
    post = Post.create(author: user1, title: 'Hello', text: 'This is my first post')
    comment = Comment.create(post: post, user_id: user1, text: 'Hi Tom!')

    comment.update_comments_counter
    check = post.comments_counter

    expect(check).to be > 0
  end
end
